credentials:
  system:
    domainCredentials:
      - credentials:
          # git plugin 连接只支持 usernamePassword 和 证书两种方式
          - usernamePassword:
              scope: GLOBAL
              id: "1"
              username: "jenkins"
              # 密码待修改
              password: "jenkins123"
          - usernamePassword:
              scope: GLOBAL
              id: "scmmanager"
              username: "scmadmin"
              # 密码待修改
              password: "scmadmin"       
#
jenkins:
  numExecutors: 4
  scmCheckoutRetryCount: 3
  mode: NORMAL
  quietPeriod: 5
  crumbIssuer:
    standard:
      excludeClientIPFromCrumb: false
  # globalNodeProperties:
  # - envVars:
  #     env:
  #     - key: "gitlabUrl"
  #       value: "http://localhost:9080"
  #
  clouds:
    - docker:
        name: "docker"
        dockerApi:
          dockerHost:
            uri: "unix:///var/run/docker.sock"

  agentProtocols:
    - "JNLP4-connect"
    - "Ping"
  remotingSecurity:
    enabled: true
  slaveAgentPort: ${SLAVE_AGENT_PORT:-50000}
#
unclassified:
  location:
    adminAddress: "support@topflames.com"
    # url: "http://localhost:8080/"
  mailer:
    authentication:
      username: "support@topflames.com"
      password: "Tf123456"
    charset: "UTF-8"
    smtpHost: "smtp.exmail.qq.com"
    useSsl: true
    useTls: false
  # globalLibraries:
  #   libraries:
  #   - name: "awesome-lib"
  #   - defaultVersion: "master"
  #     implicit: true
  #     name: "awesome-lib"
  #     retriever:
  #       modernSCM:
  #         scm:
  #           git:
  #             id: "awesome-lib"
  #             remote: "https://github.com/jenkins-infra/pipeline-library.git"
  #             traits:
  #             - cloneOptionTrait:
  #                 extension:
  #                   depth: 1
  #                   noTags: true
  #                   shallow: true
#

jobs:
  - script: >
      job('seed') {
        quietPeriod(0)
        concurrentBuild(false)
        logRotator {
          numToKeep(5)
        }
        steps {
          shell('echo job dsl!')
        }
      }
  - script: >
      organizationFolder('pipelineFolder') {
          description('自动生成流水线目录，不要删除')
          displayName('流水线目录')
          periodicFolderTrigger {
             interval('2m')
          }
      }
      organizationFolder('taskFolder') {
          description('自动生成任务目录，不要删除')
          displayName('任务目录')
          periodicFolderTrigger {
             interval('2m')
          }
      }
      organizationFolder('organizationFolder') {
          description('自动组织目录，不要删除')
          displayName('组织目录')
          periodicFolderTrigger {
             interval('2m')
          }
      }

